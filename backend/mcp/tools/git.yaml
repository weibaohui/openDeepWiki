namespace: git
description: Git 操作工具
version: "1.0"

tools:
  - name: clone
    description: 克隆指定分支
    parameters:
      - name: repo_url
        type: string
        required: true
        description: 仓库 URL
      - name: branch
        type: string
        required: false
        description: 分支名称，默认为 main
      - name: target_dir
        type: string
        required: true
        description: 本地目标目录
      - name: depth
        type: integer
        required: false
        default: 0
        description: 克隆深度，0 表示完整克隆
    returns:
      success: boolean
      path: string
      branch: string
      commit: string

  - name: diff
    description: 获取变更差异
    parameters:
      - name: commit_hash
        type: string
        required: true
        description: 提交的 hash
      - name: file_path
        type: string
        required: false
        description: 指定文件路径
    returns:
      diff_content: string
      files_changed: array

  - name: log
    description: 获取文件提交历史
    parameters:
      - name: file_path
        type: string
        required: false
        description: 文件路径，不提供则返回整个仓库历史
      - name: limit
        type: integer
        required: false
        default: 10
        description: 返回的提交数量上限
      - name: since
        type: string
        required: false
        description: 起始日期（ISO 8601 格式）
    returns:
      commits: array
        # hash, author, date, message

  - name: status
    description: 获取仓库状态
    parameters:
      - name: repo_path
        type: string
        required: true
    returns:
      branch: string
      is_clean: boolean
      modified: array
      untracked: array

  - name: branch_list
    description: 列出所有分支
    parameters:
      - name: repo_path
        type: string
        required: true
      - name: remote
        type: boolean
        required: false
        default: false
    returns:
      branches: array
      current: string
