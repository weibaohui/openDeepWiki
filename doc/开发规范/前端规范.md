# å‰ç«¯å¼€å‘è§„èŒƒ

æœ¬è§„èŒƒé€‚ç”¨äº openDeepWiki é¡¹ç›®å‰ç«¯å¼€å‘ï¼Œä¾› AI å’Œå¼€å‘è€…åœ¨ç¼–å†™å‰ç«¯ä»£ç æ—¶éµå®ˆã€‚

## ä¸€ã€æŠ€æœ¯æ ˆ

| æŠ€æœ¯         | ç‰ˆæœ¬   | ç”¨é€”       |
| ------------ | ------ | ---------- |
| React        | 18.x   | UI æ¡†æ¶    |
| TypeScript   | 5.x    | ç±»å‹å®‰å…¨   |
| Vite         | 5.x    | æ„å»ºå·¥å…·   |
| Tailwind CSS | 4.x    | åŸå­åŒ–æ ·å¼ |
| shadcn/ui    | latest | UI ç»„ä»¶åº“  |
| React Router | 6.x    | è·¯ç”±ç®¡ç†   |
| Axios        | 1.x    | HTTP è¯·æ±‚  |
| Lucide React | latest | å›¾æ ‡åº“     |
| i18next      | 23.x   | å›½é™…åŒ–æ¡†æ¶ |
| react-i18next| 14.x   | React i18n |
| next-themes  | 0.3.x  | ä¸»é¢˜åˆ‡æ¢   |

---

## äºŒã€é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/              # shadcn/ui ç»„ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”‚   â”œâ”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ common/          # ä¸šåŠ¡é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ services/            # API æœåŠ¡
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ types/               # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ lib/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ i18n/                # å›½é™…åŒ–é…ç½®
â”‚   â”‚   â”œâ”€â”€ locales/         # è¯­è¨€åŒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ zh-CN.json   # ç®€ä½“ä¸­æ–‡
â”‚   â”‚   â”‚   â””â”€â”€ en-US.json   # è‹±æ–‡
â”‚   â”‚   â””â”€â”€ index.ts         # i18n åˆå§‹åŒ–
â”‚   â”œâ”€â”€ providers/           # Context Providers
â”‚   â”‚   â”œâ”€â”€ ThemeProvider.tsx
â”‚   â”‚   â””â”€â”€ I18nProvider.tsx
â”‚   â”œâ”€â”€ styles/              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ App.tsx              # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.tsx             # å…¥å£æ–‡ä»¶
â”œâ”€â”€ components.json          # shadcn/ui é…ç½®
â”œâ”€â”€ tailwind.config.js       # Tailwind é…ç½®
â””â”€â”€ package.json
```

---

## ä¸‰ã€ç»„ä»¶ç¼–å†™è§„èŒƒ

### 3.1 ç»„ä»¶æ–‡ä»¶å‘½å

- ä½¿ç”¨ **PascalCase** å‘½åç»„ä»¶æ–‡ä»¶ï¼š`UserProfile.tsx`
- é¡µé¢ç»„ä»¶æ”¾åœ¨ `pages/` ç›®å½•
- é€šç”¨ç»„ä»¶æ”¾åœ¨ `components/` ç›®å½•

### 3.2 ç»„ä»¶ç»“æ„æ¨¡æ¿

```tsx
// 1. å¯¼å…¥è¯­å¥ï¼ˆæŒ‰é¡ºåºï¼‰
import { useState, useEffect } from 'react';          // React æ ¸å¿ƒ
import { useNavigate } from 'react-router-dom';       // ç¬¬ä¸‰æ–¹åº“
import { Button } from '@/components/ui/button';      // UI ç»„ä»¶
import { cn } from '@/lib/utils';                     // å·¥å…·å‡½æ•°
import type { Repository } from '@/types';            // ç±»å‹å®šä¹‰
import { repositoryApi } from '@/services/api';       // API æœåŠ¡

// 2. ç±»å‹å®šä¹‰
interface Props {
  id: string;
  className?: string;
  onSuccess?: () => void;
}

// 3. ç»„ä»¶å®ç°
export function ComponentName({ id, className, onSuccess }: Props) {
  // 3.1 Hooksï¼ˆæŒ‰é¡ºåºï¼šçŠ¶æ€ã€è·¯ç”±ã€å‰¯ä½œç”¨ï¼‰
  const [loading, setLoading] = useState(false);
  const [data, setData] = useState<Repository | null>(null);
  const navigate = useNavigate();

  // 3.2 å‰¯ä½œç”¨
  useEffect(() => {
    fetchData();
  }, [id]);

  // 3.3 äº‹ä»¶å¤„ç†å‡½æ•°
  const fetchData = async () => {
    setLoading(true);
    try {
      const res = await repositoryApi.get(Number(id));
      setData(res.data);
    } catch (error) {
      console.error('Failed to fetch:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleClick = () => {
    onSuccess?.();
  };

  // 3.4 æ¡ä»¶æ¸²æŸ“
  if (loading) {
    return <div>Loading...</div>;
  }

  // 3.5 ä¸»æ¸²æŸ“
  return (
    <div className={cn('flex flex-col gap-4', className)}>
      {/* å†…å®¹ */}
    </div>
  );
}

// 4. é»˜è®¤å¯¼å‡ºï¼ˆé¡µé¢ç»„ä»¶ä½¿ç”¨ï¼‰
export default ComponentName;
```

### 3.3 ç»„ä»¶å¯¼å‡ºè§„åˆ™

- **é¡µé¢ç»„ä»¶**ï¼šä½¿ç”¨ `export default`
- **é€šç”¨ç»„ä»¶**ï¼šä½¿ç”¨å‘½åå¯¼å‡º `export function`
- **UI ç»„ä»¶**ï¼šéµå¾ª shadcn/ui çš„å¯¼å‡ºæ–¹å¼

---

## å››ã€shadcn/ui ä½¿ç”¨è§„èŒƒ

### 4.1 ç»„ä»¶å¼•ç”¨

```tsx
// âœ… æ­£ç¡®ï¼šä» @/components/ui å¯¼å…¥
import { Button } from '@/components/ui/button';
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
import { Input } from '@/components/ui/input';

// âŒ é”™è¯¯ï¼šç›´æ¥ä» shadcn å¯¼å…¥
import { Button } from 'shadcn/ui';
```

### 4.2 å¸¸ç”¨ç»„ä»¶

| ç»„ä»¶     | ç”¨é€”     | ç¤ºä¾‹                                                  |
| -------- | -------- | ----------------------------------------------------- |
| Button   | æŒ‰é’®     | `<Button variant="outline">Click</Button>`            |
| Card     | å¡ç‰‡å®¹å™¨ | `<Card><CardContent>...</CardContent></Card>`         |
| Input    | è¾“å…¥æ¡†   | `<Input placeholder="Enter..." />`                    |
| Dialog   | å¯¹è¯æ¡†   | `<Dialog><DialogTrigger>...</DialogTrigger></Dialog>` |
| Table    | è¡¨æ ¼     | `<Table><TableHeader>...</TableHeader></Table>`       |
| Badge    | å¾½ç« æ ‡ç­¾ | `<Badge variant="secondary">Status</Badge>`           |
| Skeleton | éª¨æ¶å±   | `<Skeleton className="h-4 w-full" />`                 |
| Toast    | æç¤ºæ¶ˆæ¯ | `toast({ title: "Success" })`                         |

### 4.3 Button å˜ä½“ä½¿ç”¨åœºæ™¯

```tsx
// ä¸»è¦æ“ä½œ
<Button>Submit</Button>

// æ¬¡è¦æ“ä½œ
<Button variant="secondary">Cancel</Button>

// è¾¹æ¡†æŒ‰é’®
<Button variant="outline">Edit</Button>

// å±é™©æ“ä½œ
<Button variant="destructive">Delete</Button>

// å¹½çµæŒ‰é’®ï¼ˆæ— èƒŒæ™¯ï¼‰
<Button variant="ghost">More</Button>

// é“¾æ¥æ ·å¼
<Button variant="link">Learn more</Button>
```

---

## äº”ã€Tailwind CSS è§„èŒƒ

### 5.1 ç±»åé¡ºåº

éµå¾ªä»¥ä¸‹é¡ºåºç»„ç»‡ Tailwind ç±»åï¼š

1. **å¸ƒå±€**ï¼š`flex`, `grid`, `block`, `hidden`
2. **å®šä½**ï¼š`relative`, `absolute`, `fixed`
3. **ç›’æ¨¡å‹**ï¼š`w-`, `h-`, `p-`, `m-`
4. **æ’ç‰ˆ**ï¼š`text-`, `font-`, `leading-`
5. **è§†è§‰**ï¼š`bg-`, `border-`, `rounded-`, `shadow-`
6. **äº¤äº’**ï¼š`hover:`, `focus:`, `active:`
7. **åŠ¨ç”»**ï¼š`transition-`, `animate-`

```tsx
// âœ… æ­£ç¡®é¡ºåº
<div className="flex items-center justify-between w-full p-4 text-sm bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow">

// âŒ æ··ä¹±é¡ºåº
<div className="shadow-sm p-4 flex border bg-white hover:shadow-md w-full rounded-lg text-sm">
```

### 5.2 å“åº”å¼è®¾è®¡

ä½¿ç”¨ç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡ï¼š

```tsx
// ç§»åŠ¨ä¼˜å…ˆ
<div className="flex flex-col md:flex-row lg:gap-8">
  <div className="w-full md:w-1/2 lg:w-1/3">...</div>
</div>

// æ–­ç‚¹è¯´æ˜
// sm: 640px   - å°å¹³æ¿
// md: 768px   - å¹³æ¿
// lg: 1024px  - å°æ¡Œé¢
// xl: 1280px  - å¤§æ¡Œé¢
// 2xl: 1536px - è¶…å¤§å±
```

### 5.3 æ·±è‰²æ¨¡å¼

```tsx
// ä½¿ç”¨ dark: å‰ç¼€æ”¯æŒæ·±è‰²æ¨¡å¼
<div className="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
  <p className="text-gray-600 dark:text-gray-400">Content</p>
</div>
```

### 5.4 ä½¿ç”¨ cn() åˆå¹¶ç±»å

```tsx
import { cn } from '@/lib/utils';

// æ¡ä»¶ç±»å
<div className={cn(
  'flex items-center gap-2 p-4 rounded-lg',
  isActive && 'bg-blue-50 border-blue-200',
  isDisabled && 'opacity-50 cursor-not-allowed',
  className
)}>
```

---

## å…­ã€çŠ¶æ€ç®¡ç†è§„èŒƒ

### 6.1 çŠ¶æ€åˆ†ç±»

| ç±»å‹       | æ–¹æ¡ˆ                 | ç¤ºä¾‹               |
| ---------- | -------------------- | ------------------ |
| ç»„ä»¶çŠ¶æ€   | useState             | è¡¨å•è¾“å…¥ã€å¼€å…³çŠ¶æ€ |
| è·¨ç»„ä»¶çŠ¶æ€ | Context + useReducer | ç”¨æˆ·ä¿¡æ¯ã€ä¸»é¢˜è®¾ç½® |
| æœåŠ¡ç«¯çŠ¶æ€ | useState + useEffect | API æ•°æ®           |
| URL çŠ¶æ€   | useSearchParams      | ç­›é€‰æ¡ä»¶ã€åˆ†é¡µ     |

### 6.2 çŠ¶æ€æå‡åŸåˆ™

- çŠ¶æ€åº”æ”¾åœ¨æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶
- é¿å…è¿‡åº¦ä½¿ç”¨å…¨å±€çŠ¶æ€
- ä¼˜å…ˆä½¿ç”¨ç»„ä»¶ç»„åˆè€Œé Context

### 6.3 å¼‚æ­¥çŠ¶æ€æ¨¡å¼

```tsx
// æ ‡å‡†çš„å¼‚æ­¥æ•°æ®è·å–æ¨¡å¼
function useData<T>(fetcher: () => Promise<T>) {
  const [data, setData] = useState<T | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);

  const fetch = async () => {
    setLoading(true);
    setError(null);
    try {
      const result = await fetcher();
      setData(result);
    } catch (e) {
      setError(e as Error);
    } finally {
      setLoading(false);
    }
  };

  return { data, loading, error, refetch: fetch };
}
```

---

## ä¸ƒã€å¤šè¯­è¨€ï¼ˆi18nï¼‰è§„èŒƒ

### 7.1 ä¾èµ–å®‰è£…

```bash
npm install i18next react-i18next i18next-browser-languagedetector
```

### 7.2 ç›®å½•ç»“æ„

```
src/i18n/
â”œâ”€â”€ locales/
â”‚   â”œâ”€â”€ zh-CN.json    # ç®€ä½“ä¸­æ–‡
â”‚   â”œâ”€â”€ en-US.json    # è‹±æ–‡
â”‚   â””â”€â”€ ja-JP.json    # æ—¥æ–‡ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ index.ts          # i18n é…ç½®
```

### 7.3 è¯­è¨€åŒ…æ ¼å¼

```json
// locales/zh-CN.json
{
  "common": {
    "loading": "åŠ è½½ä¸­...",
    "error": "å‘ç”Ÿé”™è¯¯",
    "confirm": "ç¡®è®¤",
    "cancel": "å–æ¶ˆ",
    "save": "ä¿å­˜",
    "delete": "åˆ é™¤",
    "edit": "ç¼–è¾‘",
    "create": "åˆ›å»º",
    "search": "æœç´¢"
  },
  "nav": {
    "home": "é¦–é¡µ",
    "repositories": "ä»“åº“åˆ—è¡¨",
    "settings": "è®¾ç½®"
  },
  "repository": {
    "title": "ä»£ç ä»“åº“",
    "add": "æ·»åŠ ä»“åº“",
    "url_placeholder": "è¯·è¾“å…¥ GitHub ä»“åº“åœ°å€",
    "status": {
      "pending": "ç­‰å¾…ä¸­",
      "cloning": "å…‹éš†ä¸­",
      "ready": "å°±ç»ª",
      "analyzing": "åˆ†æä¸­",
      "completed": "å·²å®Œæˆ",
      "error": "é”™è¯¯"
    }
  },
  "task": {
    "title": "ä»»åŠ¡åˆ—è¡¨",
    "run": "è¿è¡Œ",
    "reset": "é‡ç½®",
    "status": {
      "pending": "ç­‰å¾…ä¸­",
      "running": "è¿è¡Œä¸­",
      "completed": "å·²å®Œæˆ",
      "failed": "å¤±è´¥"
    }
  },
  "settings": {
    "title": "è®¾ç½®",
    "language": "è¯­è¨€",
    "theme": "ä¸»é¢˜",
    "llm_config": "LLM é…ç½®"
  }
}
```

```json
// locales/en-US.json
{
  "common": {
    "loading": "Loading...",
    "error": "An error occurred",
    "confirm": "Confirm",
    "cancel": "Cancel",
    "save": "Save",
    "delete": "Delete",
    "edit": "Edit",
    "create": "Create",
    "search": "Search"
  },
  "nav": {
    "home": "Home",
    "repositories": "Repositories",
    "settings": "Settings"
  },
  "repository": {
    "title": "Repositories",
    "add": "Add Repository",
    "url_placeholder": "Enter GitHub repository URL",
    "status": {
      "pending": "Pending",
      "cloning": "Cloning",
      "ready": "Ready",
      "analyzing": "Analyzing",
      "completed": "Completed",
      "error": "Error"
    }
  },
  "task": {
    "title": "Tasks",
    "run": "Run",
    "reset": "Reset",
    "status": {
      "pending": "Pending",
      "running": "Running",
      "completed": "Completed",
      "failed": "Failed"
    }
  },
  "settings": {
    "title": "Settings",
    "language": "Language",
    "theme": "Theme",
    "llm_config": "LLM Configuration"
  }
}
```

### 7.4 i18n åˆå§‹åŒ–é…ç½®

```tsx
// i18n/index.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

import zhCN from './locales/zh-CN.json';
import enUS from './locales/en-US.json';

const resources = {
  'zh-CN': { translation: zhCN },
  'en-US': { translation: enUS },
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'zh-CN',
    interpolation: {
      escapeValue: false, // React å·²ç»å®‰å…¨è½¬ä¹‰
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
    },
  });

export default i18n;
```

### 7.5 åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
import { useTranslation } from 'react-i18next';

function RepositoryList() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('repository.title')}</h1>
      <Button>{t('repository.add')}</Button>
      <Input placeholder={t('repository.url_placeholder')} />
      
      {/* å¸¦å‚æ•°çš„ç¿»è¯‘ */}
      <p>{t('common.items_count', { count: 10 })}</p>
      
      {/* åµŒå¥—é”® */}
      <Badge>{t(`repository.status.${status}`)}</Badge>
    </div>
  );
}
```

### 7.6 è¯­è¨€åˆ‡æ¢ç»„ä»¶

```tsx
// components/common/LanguageSwitcher.tsx
import { useTranslation } from 'react-i18next';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Languages } from 'lucide-react';

const languages = [
  { code: 'zh-CN', name: 'ç®€ä½“ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
  { code: 'en-US', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
];

export function LanguageSwitcher() {
  const { i18n } = useTranslation();

  const handleChange = (value: string) => {
    i18n.changeLanguage(value);
  };

  return (
    <Select value={i18n.language} onValueChange={handleChange}>
      <SelectTrigger className="w-[140px]">
        <Languages className="mr-2 h-4 w-4" />
        <SelectValue />
      </SelectTrigger>
      <SelectContent>
        {languages.map((lang) => (
          <SelectItem key={lang.code} value={lang.code}>
            <span className="mr-2">{lang.flag}</span>
            {lang.name}
          </SelectItem>
        ))}
      </SelectContent>
    </Select>
  );
}
```

### 7.7 è¯­è¨€åŒ… Key å‘½åè§„èŒƒ

```
# æŒ‰æ¨¡å—åˆ†ç»„
module.action          # repository.add
module.field           # repository.url
module.status.value    # repository.status.pending

# é€šç”¨æ–‡æ¡ˆ
common.action          # common.save, common.cancel
common.message         # common.loading, common.error

# å¯¼èˆª
nav.page_name          # nav.home, nav.settings

# è¡¨å•
form.field.label       # form.email.label
form.field.placeholder # form.email.placeholder
form.field.error       # form.email.error
```

---

## å…«ã€å¤šä¸»é¢˜è§„èŒƒ

### 8.1 ä¾èµ–å®‰è£…

```bash
npm install next-themes
```

### 8.2 ä¸»é¢˜ç±»å‹å®šä¹‰

```tsx
// types/theme.ts
export type Theme = 'light' | 'dark' | 'system';

export interface ThemeColors {
  background: string;
  foreground: string;
  primary: string;
  secondary: string;
  muted: string;
  accent: string;
  destructive: string;
  border: string;
  ring: string;
}
```

### 8.3 ThemeProvider é…ç½®

```tsx
// providers/ThemeProvider.tsx
import { ThemeProvider as NextThemesProvider } from 'next-themes';
import type { ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

export function ThemeProvider({ children }: Props) {
  return (
    <NextThemesProvider
      attribute="class"
      defaultTheme="system"
      enableSystem
      disableTransitionOnChange
      storageKey="opendeepwiki-theme"
    >
      {children}
    </NextThemesProvider>
  );
}
```

### 8.4 App æ ¹ç»„ä»¶é…ç½®

```tsx
// App.tsx
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { ThemeProvider } from '@/providers/ThemeProvider';
import '@/i18n';  // åˆå§‹åŒ– i18n

function App() {
  return (
    <ThemeProvider>
      <BrowserRouter>
        <Routes>
          {/* è·¯ç”±é…ç½® */}
        </Routes>
      </BrowserRouter>
    </ThemeProvider>
  );
}

export default App;
```

### 8.5 ä¸»é¢˜åˆ‡æ¢ç»„ä»¶

```tsx
// components/common/ThemeSwitcher.tsx
import { useTheme } from 'next-themes';
import { Moon, Sun, Monitor } from 'lucide-react';
import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { useTranslation } from 'react-i18next';

export function ThemeSwitcher() {
  const { theme, setTheme } = useTheme();
  const { t } = useTranslation();

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" size="icon">
          <Sun className="h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
          <Moon className="absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
          <span className="sr-only">{t('settings.theme')}</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => setTheme('light')}>
          <Sun className="mr-2 h-4 w-4" />
          {t('theme.light')}
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme('dark')}>
          <Moon className="mr-2 h-4 w-4" />
          {t('theme.dark')}
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme('system')}>
          <Monitor className="mr-2 h-4 w-4" />
          {t('theme.system')}
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
```

### 8.6 ä½¿ç”¨ useTheme Hook

```tsx
import { useTheme } from 'next-themes';

function MyComponent() {
  const { theme, setTheme, resolvedTheme } = useTheme();

  // theme: 'light' | 'dark' | 'system'
  // resolvedTheme: å®é™…ç”Ÿæ•ˆçš„ä¸»é¢˜ 'light' | 'dark'

  return (
    <div>
      <p>å½“å‰ä¸»é¢˜: {theme}</p>
      <p>å®é™…ä¸»é¢˜: {resolvedTheme}</p>
      <Button onClick={() => setTheme('dark')}>åˆ‡æ¢åˆ°æ·±è‰²</Button>
    </div>
  );
}
```

### 8.7 Tailwind CSS ä¸»é¢˜é…ç½®

```js
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
  darkMode: 'class',  // ä½¿ç”¨ class ç­–ç•¥
  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      colors: {
        // shadcn/ui é»˜è®¤é¢œè‰²å˜é‡
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        ring: 'hsl(var(--ring))',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        primary: {
          DEFAULT: 'hsl(var(--primary))',
          foreground: 'hsl(var(--primary-foreground))',
        },
        secondary: {
          DEFAULT: 'hsl(var(--secondary))',
          foreground: 'hsl(var(--secondary-foreground))',
        },
        destructive: {
          DEFAULT: 'hsl(var(--destructive))',
          foreground: 'hsl(var(--destructive-foreground))',
        },
        muted: {
          DEFAULT: 'hsl(var(--muted))',
          foreground: 'hsl(var(--muted-foreground))',
        },
        accent: {
          DEFAULT: 'hsl(var(--accent))',
          foreground: 'hsl(var(--accent-foreground))',
        },
      },
    },
  },
  plugins: [require('@tailwindcss/typography')],
};
```

### 8.8 CSS å˜é‡å®šä¹‰

```css
/* styles/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}
```

### 8.9 ç»„ä»¶ä¸­ä½¿ç”¨ä¸»é¢˜æ ·å¼

```tsx
// âœ… ä½¿ç”¨ Tailwind dark: å‰ç¼€
<div className="bg-white dark:bg-gray-900">
  <p className="text-gray-900 dark:text-gray-100">å†…å®¹</p>
</div>

// âœ… ä½¿ç”¨ CSS å˜é‡ï¼ˆæ¨èï¼‰
<div className="bg-background text-foreground">
  <p className="text-muted-foreground">æ¬¡è¦æ–‡æœ¬</p>
  <Button className="bg-primary text-primary-foreground">æŒ‰é’®</Button>
</div>

// âŒ ä¸æ¨èï¼šç¡¬ç¼–ç é¢œè‰²
<div className="bg-white text-black">
  <p className="text-gray-500">å†…å®¹</p>
</div>
```

### 8.10 ä¸»é¢˜æ„ŸçŸ¥å›¾ç‰‡/å›¾æ ‡

```tsx
import { useTheme } from 'next-themes';

function Logo() {
  const { resolvedTheme } = useTheme();

  return (
    <img
      src={resolvedTheme === 'dark' ? '/logo-dark.svg' : '/logo-light.svg'}
      alt="Logo"
    />
  );
}

// æˆ–ä½¿ç”¨ CSS
<img
  src="/logo-light.svg"
  alt="Logo"
  className="dark:hidden"
/>
<img
  src="/logo-dark.svg"
  alt="Logo"
  className="hidden dark:block"
/>
```

---

## ä¹ã€API è°ƒç”¨è§„èŒƒ

### 7.1 API æœåŠ¡æ–‡ä»¶ç»“æ„

```tsx
// services/api.ts
import axios from 'axios';
import type { Repository, Task, Document } from '@/types';

const API_BASE = import.meta.env.VITE_API_BASE || 'http://localhost:8080/api';

const api = axios.create({
  baseURL: API_BASE,
  headers: { 'Content-Type': 'application/json' },
});

// æŒ‰èµ„æºåˆ†ç»„
export const repositoryApi = {
  list: () => api.get<Repository[]>('/repositories'),
  get: (id: number) => api.get<Repository>(`/repositories/${id}`),
  create: (url: string) => api.post<Repository>('/repositories', { url }),
  delete: (id: number) => api.delete(`/repositories/${id}`),
};

export const taskApi = {
  run: (id: number) => api.post(`/tasks/${id}/run`),
  reset: (id: number) => api.post(`/tasks/${id}/reset`),
};
```

### 7.2 é”™è¯¯å¤„ç†

```tsx
// ç»Ÿä¸€é”™è¯¯å¤„ç†
const handleApiError = (error: unknown) => {
  if (axios.isAxiosError(error)) {
    const message = error.response?.data?.error || error.message;
    toast({ title: 'Error', description: message, variant: 'destructive' });
  }
};

// ä½¿ç”¨ç¤ºä¾‹
try {
  await repositoryApi.create(url);
  toast({ title: 'Success', description: 'Repository created' });
} catch (error) {
  handleApiError(error);
}
```

---

## å…«ã€ç±»å‹å®šä¹‰è§„èŒƒ

### 8.1 ç±»å‹æ–‡ä»¶ç»„ç»‡

```tsx
// types/index.ts
export interface Repository {
  id: number;
  name: string;
  url: string;
  status: RepositoryStatus;
  created_at: string;
  updated_at: string;
}

export type RepositoryStatus = 
  | 'pending' 
  | 'cloning' 
  | 'ready' 
  | 'analyzing' 
  | 'completed' 
  | 'error';

export interface Task {
  id: number;
  repository_id: number;
  type: TaskType;
  status: TaskStatus;
  title: string;
}

export type TaskType = 'overview' | 'architecture' | 'api' | 'business-flow' | 'deployment';
export type TaskStatus = 'pending' | 'running' | 'completed' | 'failed';
```

### 8.2 ç±»å‹å¯¼å…¥

```tsx
// âœ… ä½¿ç”¨ type å…³é”®å­—å¯¼å…¥ç±»å‹
import type { Repository, Task } from '@/types';

// âŒ ä¸æ¨èï¼šæ··åˆå¯¼å…¥
import { Repository, someFunction } from '@/types';
```

---

## ä¹ã€å‘½åè§„èŒƒ

### 9.1 æ–‡ä»¶å‘½å

| ç±»å‹      | è§„èŒƒ       | ç¤ºä¾‹                |
| --------- | ---------- | ------------------- |
| ç»„ä»¶æ–‡ä»¶  | PascalCase | `UserProfile.tsx`   |
| Hook æ–‡ä»¶ | camelCase  | `useAuth.ts`        |
| å·¥å…·å‡½æ•°  | camelCase  | `formatDate.ts`     |
| ç±»å‹æ–‡ä»¶  | camelCase  | `index.ts`          |
| æ ·å¼æ–‡ä»¶  | kebab-case | `global-styles.css` |

### 9.2 å˜é‡å‘½å

```tsx
// ç»„ä»¶åï¼šPascalCase
function UserProfile() {}

// å‡½æ•°åï¼šcamelCaseï¼ŒåŠ¨è¯å¼€å¤´
const fetchData = () => {};
const handleClick = () => {};
const formatDate = () => {};

// å¸ƒå°”å€¼ï¼šis/has/can å‰ç¼€
const isLoading = true;
const hasError = false;
const canEdit = true;

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const API_BASE_URL = 'http://...';
const MAX_RETRY_COUNT = 3;

// äº‹ä»¶å¤„ç†ï¼šhandle å‰ç¼€
const handleSubmit = () => {};
const handleChange = () => {};

// å›è°ƒå±æ€§ï¼šon å‰ç¼€
interface Props {
  onSuccess?: () => void;
  onChange?: (value: string) => void;
}
```

---

## åã€æœ€ä½³å®è·µ

### 10.1 æ€§èƒ½ä¼˜åŒ–

```tsx
// 1. ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const filteredItems = useMemo(() => 
  items.filter(item => item.status === status),
  [items, status]
);

// 2. ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°
const handleClick = useCallback(() => {
  setCount(c => c + 1);
}, []);

// 3. åˆ—è¡¨æ¸²æŸ“ä½¿ç”¨ç¨³å®šçš„ key
{items.map(item => (
  <Item key={item.id} data={item} />  // âœ… ä½¿ç”¨å”¯ä¸€ ID
))}

// 4. é¿å…åœ¨æ¸²æŸ“ä¸­åˆ›å»ºå¯¹è±¡
// âŒ æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å¯¹è±¡
<Component style={{ color: 'red' }} />

// âœ… æå–ä¸ºå¸¸é‡
const style = { color: 'red' };
<Component style={style} />
```

### 10.2 å¯è®¿é—®æ€§

```tsx
// 1. å›¾ç‰‡å¿…é¡»æœ‰ alt
<img src={url} alt="Repository icon" />

// 2. æŒ‰é’®å¿…é¡»æœ‰æ˜ç¡®æ ‡ç­¾
<Button aria-label="Close dialog">
  <X className="h-4 w-4" />
</Button>

// 3. è¡¨å•è¾“å…¥å…³è” label
<label htmlFor="repo-url">Repository URL</label>
<Input id="repo-url" />

// 4. ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾
<header>...</header>
<main>...</main>
<nav>...</nav>
<footer>...</footer>
```

### 10.3 ä»£ç ç»„ç»‡

```tsx
// 1. å•ä¸€èŒè´£ï¼šæ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹
// âŒ ä¸€ä¸ªç»„ä»¶åšå¤ªå¤šäº‹
function Dashboard() {
  // ç”¨æˆ·æ•°æ®è·å–
  // ä»“åº“æ•°æ®è·å–
  // ä»»åŠ¡æ•°æ®è·å–
  // ç»Ÿè®¡è®¡ç®—
  // æ¸²æŸ“æ‰€æœ‰å†…å®¹
}

// âœ… æ‹†åˆ†ä¸ºå¤šä¸ªç»„ä»¶
function Dashboard() {
  return (
    <div>
      <UserStats />
      <RepositoryList />
      <TaskProgress />
    </div>
  );
}

// 2. ç»„ä»¶æ–‡ä»¶ä¸è¶…è¿‡ 300 è¡Œ
// è¶…è¿‡æ—¶è€ƒè™‘æ‹†åˆ†å­ç»„ä»¶

// 3. æå–å¤æ‚é€»è¾‘åˆ°è‡ªå®šä¹‰ Hook
function useRepositories() {
  const [repos, setRepos] = useState([]);
  const [loading, setLoading] = useState(true);
  // ... é€»è¾‘
  return { repos, loading, refetch };
}
```

---

## åä¸€ã€ç¦æ­¢äº‹é¡¹

### 11.1 ä¸¥ç¦

- âŒ ä½¿ç”¨ `any` ç±»å‹ï¼ˆé™¤éæœ‰å……åˆ†ç†ç”±ï¼‰
- âŒ åœ¨ç»„ä»¶å†…å®šä¹‰å†…è”æ ·å¼å¯¹è±¡
- âŒ ç›´æ¥æ“ä½œ DOMï¼ˆåº”ä½¿ç”¨ refï¼‰
- âŒ åœ¨æ¸²æŸ“é˜¶æ®µäº§ç”Ÿå‰¯ä½œç”¨
- âŒ ä½¿ç”¨ `index` ä½œä¸ºåˆ—è¡¨ keyï¼ˆæœ‰ç¨³å®š ID æ—¶ï¼‰

### 11.2 é¿å…

- âš ï¸ è¿‡åº¦ä½¿ç”¨ Context
- âš ï¸ ç»„ä»¶åµŒå¥—è¶…è¿‡ 5 å±‚
- âš ï¸ å•ä¸ªæ–‡ä»¶è¶…è¿‡ 300 è¡Œ
- âš ï¸ åœ¨ useEffect ä¸­ä¸å¤„ç†æ¸…ç†å‡½æ•°
- âš ï¸ å¿½ç•¥ TypeScript é”™è¯¯

---

## åäºŒã€ä»£ç å®¡æŸ¥æ¸…å•

åœ¨æäº¤ä»£ç å‰ï¼Œç¡®ä¿ï¼š

- [ ] æ‰€æœ‰ç»„ä»¶éƒ½æœ‰ TypeScript ç±»å‹
- [ ] ä½¿ç”¨äº† shadcn/ui ç»„ä»¶è€Œéè‡ªå®šä¹‰æ ·å¼
- [ ] Tailwind ç±»åæœ‰åºæ’åˆ—
- [ ] API è°ƒç”¨æœ‰é”™è¯¯å¤„ç†
- [ ] åˆ—è¡¨æ¸²æŸ“æœ‰ç¨³å®šçš„ key
- [ ] å›¾ç‰‡æœ‰ alt å±æ€§
- [ ] æ²¡æœ‰æœªä½¿ç”¨çš„å¯¼å…¥
- [ ] ç»„ä»¶èŒè´£å•ä¸€
- [ ] å¤æ‚é€»è¾‘æå–åˆ° Hook
