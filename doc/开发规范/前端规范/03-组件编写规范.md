# 组件编写规范

本文档定义 React 组件的编写规范，包括命名、结构和导出规则。

本文示例不包含代码注释，原示例注释已移除，如需保留请自行补充。

## 组件文件命名

- 使用 **PascalCase** 命名组件文件：`UserProfile.tsx`
- 页面组件放在 `pages/` 目录
- 通用组件放在 `components/` 目录

## 组件结构模板

```tsx
import { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Button, Card, Space, Spin } from 'antd';
import type { Repository } from '@/types';
import { repositoryApi } from '@/services/api';

interface Props {
  id: string;
  onSuccess?: () => void;
}

export function ComponentName({ id, onSuccess }: Props) {
  const [loading, setLoading] = useState(false);
  const [data, setData] = useState<Repository | null>(null);
  const navigate = useNavigate();

  useEffect(() => {
    const fetchData = async () => {
      setLoading(true);
      try {
        const res = await repositoryApi.get(Number(id));
        setData(res.data);
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [id]);

  const handleClick = () => {
    onSuccess?.();
  };

  if (loading) {
    return <Spin />;
  }

  return (
    <Card>
      <Space direction="vertical" size={12}>
        <div>{data?.name}</div>
        <Button type="primary" onClick={handleClick}>提交</Button>
        <Button onClick={() => navigate('/')}>返回</Button>
      </Space>
    </Card>
  );
}

export default ComponentName;
```

## 导入语句顺序

1. React 核心模块
2. 第三方库
3. Ant Design 组件
4. 工具函数
5. 类型定义（使用 `import type`）
6. API 服务

## 组件导出规则

| 组件类型 | 导出方式         | 示例                          |
| -------- | ---------------- | ----------------------------- |
| 页面组件 | `export default` | `export default HomePage;`    |
| 通用组件 | 命名导出         | `export function Button() {}` |
| UI 组件  | 遵循 Ant Design | 按 Ant Design 规范            |

## Hooks 顺序

在组件内部，Hooks 应按以下顺序组织：

1. `useState` - 状态定义
2. `useRef` - 引用
3. `useContext` - 上下文
4. `useNavigate` / `useParams` - 路由相关
5. `useMemo` / `useCallback` - 计算缓存
6. `useEffect` - 副作用

## 相关文档

- [类型定义规范](./10-类型定义规范.md)
- [命名规范](./11-命名规范.md)
