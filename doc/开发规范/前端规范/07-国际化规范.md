# 国际化规范

本文档定义 Ant Design 的多语言使用方式，统一组件文案与业务文案的切换策略。

本文示例不包含代码注释，原示例注释已移除，如需保留请自行补充。

## 目录结构

```
src/i18n/
├── messages/
│   ├── zh-CN.ts
│   └── en-US.ts
└── index.ts
```

## 语言包格式

```ts
export const zhCN = {
  common: {
    loading: '加载中...',
    error: '发生错误',
    confirm: '确认',
    cancel: '取消',
    save: '保存',
    delete: '删除',
    search: '搜索',
  },
  nav: {
    home: '首页',
    repositories: '仓库列表',
    settings: '设置',
  },
};
```

```ts
export const enUS = {
  common: {
    loading: 'Loading...',
    error: 'An error occurred',
    confirm: 'Confirm',
    cancel: 'Cancel',
    save: 'Save',
    delete: 'Delete',
    search: 'Search',
  },
  nav: {
    home: 'Home',
    repositories: 'Repositories',
    settings: 'Settings',
  },
};
```

## i18n 初始化

```ts
import type { Locale } from 'antd/es/locale';
import zhCN from 'antd/locale/zh_CN';
import enUS from 'antd/locale/en_US';
import { enUS as appEnUS, zhCN as appZhCN } from './messages';

export type AppLocale = 'zh-CN' | 'en-US';

export const antdLocales: Record<AppLocale, Locale> = {
  'zh-CN': zhCN,
  'en-US': enUS,
};

export const messages = {
  'zh-CN': appZhCN,
  'en-US': appEnUS,
};

export function getMessage(locale: AppLocale, path: string) {
  const parts = path.split('.');
  let current: unknown = messages[locale];
  for (const key of parts) {
    if (current && typeof current === 'object') {
      current = (current as Record<string, unknown>)[key];
    } else {
      current = undefined;
    }
  }
  return typeof current === 'string' ? current : path;
}
```

## 在组件中使用

```tsx
import { Button, Input, Typography } from 'antd';
import { getMessage } from '@/i18n';

function RepositoryList({ locale }: { locale: 'zh-CN' | 'en-US' }) {
  return (
    <div>
      <Typography.Title level={3}>
        {getMessage(locale, 'nav.repositories')}
      </Typography.Title>
      <Button type="primary">{getMessage(locale, 'common.save')}</Button>
      <Input placeholder={getMessage(locale, 'common.search')} />
    </div>
  );
}
```

## Ant Design 组件语言

```tsx
import { ConfigProvider } from 'antd';
import { antdLocales } from '@/i18n';

function AppI18nProvider({
  locale,
  children,
}: {
  locale: 'zh-CN' | 'en-US';
  children: React.ReactNode;
}) {
  return <ConfigProvider locale={antdLocales[locale]}>{children}</ConfigProvider>;
}
```

## 语言切换组件

```tsx
import { Select } from 'antd';

const options = [
  { value: 'zh-CN', label: '简体中文' },
  { value: 'en-US', label: 'English' },
];

function LanguageSwitcher({
  locale,
  onChange,
}: {
  locale: 'zh-CN' | 'en-US';
  onChange: (value: 'zh-CN' | 'en-US') => void;
}) {
  return (
    <Select
      value={locale}
      options={options}
      onChange={(value) => onChange(value)}
      style={{ width: 140 }}
    />
  );
}
```

## 语言包 Key 命名规范

```
module.action
module.field
module.status.value
common.action
common.message
nav.page_name
form.field.label
form.field.placeholder
form.field.error
```

## 相关文档

- [主题规范](./08-主题规范.md)
- [技术栈](./01-技术栈.md)
