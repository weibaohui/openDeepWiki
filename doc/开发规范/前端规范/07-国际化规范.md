# å›½é™…åŒ–è§„èŒƒ

æœ¬æ–‡æ¡£å®šä¹‰å¤šè¯­è¨€ï¼ˆi18nï¼‰çš„é…ç½®å’Œä½¿ç”¨æ–¹å¼ã€‚

## ä¾èµ–å®‰è£…

```bash
npm install i18next react-i18next i18next-browser-languagedetector
```

## ç›®å½•ç»“æ„

```
src/i18n/
â”œâ”€â”€ locales/
â”‚   â”œâ”€â”€ zh-CN.json    # ç®€ä½“ä¸­æ–‡
â”‚   â”œâ”€â”€ en-US.json    # è‹±æ–‡
â”‚   â””â”€â”€ ja-JP.json    # æ—¥æ–‡ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ index.ts          # i18n é…ç½®
```

## è¯­è¨€åŒ…æ ¼å¼

```json
// locales/zh-CN.json
{
  "common": {
    "loading": "åŠ è½½ä¸­...",
    "error": "å‘ç”Ÿé”™è¯¯",
    "confirm": "ç¡®è®¤",
    "cancel": "å–æ¶ˆ",
    "save": "ä¿å­˜",
    "delete": "åˆ é™¤",
    "edit": "ç¼–è¾‘",
    "create": "åˆ›å»º",
    "search": "æœç´¢"
  },
  "nav": {
    "home": "é¦–é¡µ",
    "repositories": "ä»“åº“åˆ—è¡¨",
    "settings": "è®¾ç½®"
  },
  "repository": {
    "title": "ä»£ç ä»“åº“",
    "add": "æ·»åŠ ä»“åº“",
    "url_placeholder": "è¯·è¾“å…¥ GitHub ä»“åº“åœ°å€",
    "status": {
      "pending": "ç­‰å¾…ä¸­",
      "cloning": "å…‹éš†ä¸­",
      "ready": "å°±ç»ª",
      "analyzing": "åˆ†æä¸­",
      "completed": "å·²å®Œæˆ",
      "error": "é”™è¯¯"
    }
  },
  "task": {
    "title": "ä»»åŠ¡åˆ—è¡¨",
    "run": "è¿è¡Œ",
    "reset": "é‡ç½®",
    "status": {
      "pending": "ç­‰å¾…ä¸­",
      "running": "è¿è¡Œä¸­",
      "completed": "å·²å®Œæˆ",
      "failed": "å¤±è´¥"
    }
  },
  "settings": {
    "title": "è®¾ç½®",
    "language": "è¯­è¨€",
    "theme": "ä¸»é¢˜",
    "llm_config": "LLM é…ç½®"
  },
  "theme": {
    "light": "æµ…è‰²",
    "dark": "æ·±è‰²",
    "system": "è·Ÿéšç³»ç»Ÿ"
  }
}
```

```json
// locales/en-US.json
{
  "common": {
    "loading": "Loading...",
    "error": "An error occurred",
    "confirm": "Confirm",
    "cancel": "Cancel",
    "save": "Save",
    "delete": "Delete",
    "edit": "Edit",
    "create": "Create",
    "search": "Search"
  },
  "nav": {
    "home": "Home",
    "repositories": "Repositories",
    "settings": "Settings"
  },
  "repository": {
    "title": "Repositories",
    "add": "Add Repository",
    "url_placeholder": "Enter GitHub repository URL",
    "status": {
      "pending": "Pending",
      "cloning": "Cloning",
      "ready": "Ready",
      "analyzing": "Analyzing",
      "completed": "Completed",
      "error": "Error"
    }
  },
  "task": {
    "title": "Tasks",
    "run": "Run",
    "reset": "Reset",
    "status": {
      "pending": "Pending",
      "running": "Running",
      "completed": "Completed",
      "failed": "Failed"
    }
  },
  "settings": {
    "title": "Settings",
    "language": "Language",
    "theme": "Theme",
    "llm_config": "LLM Configuration"
  },
  "theme": {
    "light": "Light",
    "dark": "Dark",
    "system": "System"
  }
}
```

## i18n åˆå§‹åŒ–é…ç½®

```tsx
// i18n/index.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

import zhCN from './locales/zh-CN.json';
import enUS from './locales/en-US.json';

const resources = {
  'zh-CN': { translation: zhCN },
  'en-US': { translation: enUS },
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'zh-CN',
    interpolation: {
      escapeValue: false, // React å·²ç»å®‰å…¨è½¬ä¹‰
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
    },
  });

export default i18n;
```

## åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
import { useTranslation } from 'react-i18next';

function RepositoryList() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('repository.title')}</h1>
      <Button>{t('repository.add')}</Button>
      <Input placeholder={t('repository.url_placeholder')} />
      
      {/* å¸¦å‚æ•°çš„ç¿»è¯‘ */}
      <p>{t('common.items_count', { count: 10 })}</p>
      
      {/* åµŒå¥—é”® */}
      <Badge>{t(`repository.status.${status}`)}</Badge>
    </div>
  );
}
```

## è¯­è¨€åˆ‡æ¢ç»„ä»¶

```tsx
// components/common/LanguageSwitcher.tsx
import { useTranslation } from 'react-i18next';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Languages } from 'lucide-react';

const languages = [
  { code: 'zh-CN', name: 'ç®€ä½“ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
  { code: 'en-US', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
];

export function LanguageSwitcher() {
  const { i18n } = useTranslation();

  const handleChange = (value: string) => {
    i18n.changeLanguage(value);
  };

  return (
    <Select value={i18n.language} onValueChange={handleChange}>
      <SelectTrigger className="w-[140px]">
        <Languages className="mr-2 h-4 w-4" />
        <SelectValue />
      </SelectTrigger>
      <SelectContent>
        {languages.map((lang) => (
          <SelectItem key={lang.code} value={lang.code}>
            <span className="mr-2">{lang.flag}</span>
            {lang.name}
          </SelectItem>
        ))}
      </SelectContent>
    </Select>
  );
}
```

## è¯­è¨€åŒ… Key å‘½åè§„èŒƒ

```
# æŒ‰æ¨¡å—åˆ†ç»„
module.action          # repository.add
module.field           # repository.url
module.status.value    # repository.status.pending

# é€šç”¨æ–‡æ¡ˆ
common.action          # common.save, common.cancel
common.message         # common.loading, common.error

# å¯¼èˆª
nav.page_name          # nav.home, nav.settings

# è¡¨å•
form.field.label       # form.email.label
form.field.placeholder # form.email.placeholder
form.field.error       # form.email.error
```

## ç›¸å…³æ–‡æ¡£

- [ä¸»é¢˜è§„èŒƒ](./08-ä¸»é¢˜è§„èŒƒ.md)
- [æŠ€æœ¯æ ˆ](./01-æŠ€æœ¯æ ˆ.md)
