# 025-文档概览与任务入口-设计.md

# 0. 文件修改记录表

| 修改人 | 修改时间 | 修改内容 |
| ------ | -------- | -------- |
| AI | 2026-02-07 | 初始版本 |
| AI | 2026-02-07 | 文档概览页合并至 DocViewer |

# 1. 总体方案
在前端新增文档概览页（/repo/:id/index），沿用现有文档展示页的左右布局：左侧为文档列表，右侧为统计信息卡片。首页仓库卡片点击跳转至文档概览页，同时新增“任务管理”按钮直接进入任务管理页（/repo/:id）。

# 2. 前端设计

## 2.1 路由调整
- 新增路由：`/repo/:id/index` → `DocViewer`（复用文档页布局）
- 保持现有 `/repo/:id` 作为任务管理页
- `/repo/:id/doc/:docId` 保持不变

## 2.2 页面结构（DocViewer - Index 模式）
- Header：展示仓库名称与返回首页按钮
- Sider（桌面）/ Drawer（移动端）：文档列表，点击跳转具体文档页
- Content：右侧文档统计卡片

## 2.3 数据获取
- repositoryApi.get(id)：获取仓库基本信息
- taskApi.getByRepository(id)：获取任务列表用于统计
- documentApi.getByRepository(id)：获取文档列表用于展示与版本统计

## 2.4 统计计算
- 文档总数：任务总数
- 已完成数：任务状态为 completed 或 succeeded
- 待生成数：任务状态非 completed/succeeded
- 状态分组：按任务状态聚合数量并展示
- 版本总数：documents 的 version 字段求和

## 2.5 UI 与交互
- 统计区域使用 Card + Statistic 组合
- 状态分组使用列表展示，每条显示状态标签与数量
- 文档列表排序使用 sort_order 升序
- 文档项点击进入 `/repo/:id/doc/:docId`

# 3. 国际化
- 新增文案：文档概览标题、统计字段（总数/已完成/待生成/版本总数/状态分组）
- 中英文语言包同步补齐

# 4. 兼容性与安全
- 不新增后端接口，保证兼容现有 API
- 前端仅使用已有状态字段与类型定义，避免字段扩展
