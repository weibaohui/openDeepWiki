# 024-文档展示显示仓库地址-需求.md

# 0. 文件修改记录表

| 修改人 | 修改时间 | 修改内容 |
| ------ | -------- | -------- |
| AI | 2026-02-06 | 初始版本 |

# 1. 背景（Why）
文档展示页当前仅显示文档标题与更新时间，无法明确该文档属于哪个代码仓库，用户在多仓库场景下容易混淆来源，需要在文档展示界面显示仓库地址。

# 2. 目标（What，必须可验证）
- [ ] 文档展示页显示仓库地址字段
- [ ] 中文与英文文案可切换
- [ ] 移动端与桌面端均可正常展示

# 3. 非目标（Explicitly Out of Scope）
- 不新增或修改后端 API
- 不新增仓库管理或编辑入口
- 不改变文档内容编辑与导出功能

# 4. 使用场景 / 用户路径
1. 用户进入仓库详情页并点击查看文档
2. 页面顶部显示文档标题与仓库地址
3. 用户通过仓库地址确认文档来源

# 5. 功能需求清单（Checklist）
- [ ] 使用仓库 ID 获取仓库详情并读取 url 字段
- [ ] 在文档展示页顶部区域展示“仓库地址：<url>”
- [ ] url 为空时不展示该行
- [ ] 使用现有国际化机制提供中英文文案
- [ ] 保持现有布局与操作按钮可用

# 6. 约束条件（非常关键）
- 技术约束：使用现有 repositoryApi 与类型定义，不新增 API
- 架构约束：仅修改前端文档展示页面
- 安全约束：不得在日志中输出敏感信息
- 性能约束：不引入额外的长链路请求或阻塞渲染

# 7. 可修改 / 不可修改项
- ❌ 不可修改：后端接口、数据库结构、路由结构
- ✅ 可调整：文档展示页顶部布局与样式

# 8. 接口与数据约定（如适用）
- 使用接口：GET /repositories/:id
- 关键字段：Repository.url

# 9. 验收标准（Acceptance Criteria）
- 如果仓库存在 url，则文档展示页顶部可见“仓库地址：<url>”
- 如果仓库 url 为空，则页面不显示该行且无报错
- 切换文档、编辑与导出功能保持可用
- 中文与英文文案可切换显示

# 10. 风险与已知不确定点
- 如果仓库信息获取失败，文档内容仍需正常展示

# 11. 非目标
- 不在文档页提供跳转到仓库地址的交互
