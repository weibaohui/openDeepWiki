# 025-文档概览与任务入口-需求.md

# 0. 文件修改记录表

| 修改人 | 修改时间 | 修改内容 |
| ------ | -------- | -------- |
| AI | 2026-02-07 | 初始版本 |

# 1. 背景（Why）
首页仓库卡片点击后直接进入任务管理页面，缺少面向文档阅读的统一入口；同时缺少一个汇总展示文档生成状态与版本数量的概览页，用户需要在文档阅读与任务管理之间频繁切换。

# 2. 目标（What，必须可验证）
- [ ] 首页仓库卡片新增“任务管理”按钮，点击进入任务管理页（/repo/:id）
- [ ] 仓库名称点击进入文档概览页（/repo/:id/index）
- [ ] 文档概览页左侧展示文档列表，点击跳转具体文档页（/repo/:id/doc/:docId）
- [ ] 文档概览页右侧展示文档统计：文档总数、已完成数、待生成数、按状态分组统计、版本总数
- [ ] 中英文文案可切换，布局在桌面与移动端均可使用

# 3. 非目标（Explicitly Out of Scope）
- 不新增或修改后端 API
- 不修改文档内容编辑、导出与版本切换能力
- 不新增任务执行逻辑与状态流转逻辑

# 4. 使用场景 / 用户路径
1. 用户在首页看到仓库卡片
2. 点击仓库名称进入文档概览页
3. 在左侧文档列表中选择具体文档进入文档展示页
4. 点击“任务管理”按钮进入任务管理页查看任务执行情况

# 5. 功能需求清单（Checklist）
- [ ] 首页仓库卡片点击行为调整为进入 /repo/:id/index
- [ ] 首页仓库卡片新增“任务管理”按钮，进入 /repo/:id
- [ ] 新增文档概览页路由 /repo/:id/index
- [ ] 文档概览页获取仓库信息、任务列表、文档列表
- [ ] 文档统计计算规则：
  - 文档总数：任务总数
  - 已完成数：任务状态为 completed 或 succeeded 的数量
  - 待生成数：任务状态非 completed/succeeded 的数量
  - 状态分组：按任务状态聚合数量并展示
  - 版本总数：所有文档 version 字段之和（文档列表为最新版本）

# 6. 约束条件（非常关键）
- 技术约束：仅使用现有前端技术栈与 API
- 架构约束：不新增后端接口与数据库字段
- 安全约束：不在日志中输出敏感信息
- 性能约束：不引入重度计算或阻塞渲染

# 7. 可修改 / 不可修改项
- ❌ 不可修改：后端接口、数据库结构、现有任务状态定义
- ✅ 可调整：前端路由、页面布局、统计展示方式

# 8. 接口与数据约定（如适用）
- GET /repositories/:id
- GET /repositories/:id/tasks
- GET /repositories/:id/documents

# 9. 验收标准（Acceptance Criteria）
- 首页仓库卡片新增“任务管理”按钮且可进入任务管理页
- 点击仓库名称或卡片进入文档概览页
- 文档概览页左侧文档列表可跳转到文档展示页
- 统计信息展示与任务状态一致，版本总数正确显示
- 中英文切换正常，移动端可打开侧边文档列表

# 10. 风险与已知不确定点
- 若任务状态扩展或命名调整，统计分组需同步更新展示逻辑
