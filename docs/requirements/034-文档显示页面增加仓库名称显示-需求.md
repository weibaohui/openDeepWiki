# 034-文档显示页面增加仓库名称显示-需求.md

# 0. 文件修改记录表

| 修改人 | 修改时间 | 修改内容 |
| ------ | -------- | -------- |
| AI | 2026-02-11 | 初始版本 |
| AI | 2026-02-11 | 调整需求：仓库名称不可点击，增加跳转和复制图标 |

# 1. 背景（Why）
文档展示页当前在左上角仅显示文档标题（或概览标题），无法明确该文档属于哪个代码仓库。用户在多仓库场景下或通过外部链接直接打开文档页时，容易混淆来源。为了方便读者明确知晓当前是哪个仓库的文档，需要在文档显示页的左上角增加仓库名称的显示。

# 2. 目标（What，必须可验证）
- [ ] 文档显示页左上角显示仓库名称
- [ ] 仓库名称下方显示两个图标操作按钮
- [ ] 跳转图标：点击跳转到仓库地址（GitHub/GitLab 等）
- [ ] 复制图标：点击复制仓库地址到剪贴板
- [ ] 中文与英文文案可切换
- [ ] 移动端与桌面端均可正常展示

# 3. 非目标（Explicitly Out of Scope）
- 不新增或修改后端 API
- 不修改仓库名称或编辑入口
- 不改变文档内容编辑与导出功能
- 仓库名称本身不提供跳转功能

# 4. 使用场景 / 用户路径
1. 用户进入仓库详情页并点击查看文档
2. 文档显示页左上角显示仓库名称
3. 用户通过仓库名称确认文档来源
4. 用户点击跳转图标，打开仓库地址（GitHub/GitLab 等）
5. 用户点击复制图标，将仓库地址复制到剪贴板

# 5. 功能需求清单（Checklist）
- [ ] 在文档显示页左上角显示仓库名称
- [ ] 仓库名称显示在文档标题之前
- [ ] 使用仓库的 name 字段
- [ ] 仓库名称不可点击，仅作为显示文本
- [ ] 仓库名称下方显示两个图标按钮：
  - [ ] 向斜右上方的箭头图标，点击在新标签页打开仓库地址（repository.url）
  - [ ] 复制图标，点击将仓库地址复制到剪贴板，并显示复制成功提示
- [ ] 仓库地址为空时，图标按钮不显示或禁用
- [ ] 复制成功后显示友好的提示消息
- [ ] 文档概览页也显示仓库名称及图标按钮
- [ ] 保持现有布局与操作按钮可用

# 6. 约束条件（非常关键）
- 技术约束：使用现有 repositoryApi 与类型定义，不新增 API
- 架构约束：仅修改前端文档显示页面
- 安全约束：不得在日志中输出敏感信息
- 性能约束：不引入额外的长链路请求或阻塞渲染

# 7. 可修改 / 不可修改项
- ❌ 不可修改：后端接口、数据库结构、路由结构
- ✅ 可调整：文档显示页左上角布局与样式

# 8. 接口与数据约定（如适用）
- 使用接口：GET /repositories/:id
- 关键字段：Repository.name, Repository.url

# 9. 验收标准（Acceptance Criteria）
- 文档显示页左上角可见仓库名称
- 仓库名称显示在文档标题之前
- 仓库名称不可点击
- 仓库名称下方可见跳转图标和复制图标
- 点击跳转图标在新标签页打开仓库地址
- 点击复制图标将仓库地址复制到剪贴板，并显示成功提示
- 仓库地址为空时，图标按钮不显示
- 文档概览页也显示仓库名称及图标按钮
- 中文与英文环境下均可正常显示
- 切换文档、编辑与导出功能保持可用

# 10. 风险与已知不确定点
- 如果仓库信息获取失败，文档内容仍需正常展示
- 仓库名称过长时需要适当截断或省略显示
- 仓库地址为空时，图标按钮的显示逻辑需要清晰

# 11. 非目标
- 不在文档页提供其他仓库管理功能
- 仓库名称本身不提供跳转功能
