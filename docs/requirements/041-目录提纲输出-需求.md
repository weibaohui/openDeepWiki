# 041-目录提纲输出-需求.md

# 0. 文件修改记录表

| 修改人 | 修改时间 | 修改内容 |
| ------ | -------- | -------- |
| AI | 2026-02-13 | 初始版本 |

## 一、背景（Why）

目录生成任务目前仅产出标题，缺少针对标题的写作提纲，导致后续文档生成缺乏结构化指引。需要让目录生成阶段同步给出提纲，并将其持久化，供后续写作使用。

## 二、目标（What，必须可验证）

- [ ] 目录生成输出中包含 outline 字段
- [ ] outline 持久化到 Task 表，并可随任务数据返回
- [ ] 目录生成任务创建文档任务时写入 outline
- [ ] 同步导入/导出任务数据时保留 outline

## 三、非目标（Explicitly Out of Scope）

- 不调整文档生成算法与写作逻辑
- 不新增前端展示 outline 的界面
- 不修改既有任务状态机与调度逻辑

## 四、详细需求

### 4.1 目录输出格式

- 目录项新增 outline 字段
- outline 为多行字符串，建议使用 Markdown 列表表达写作提纲
- 未提供 outline 时允许为空

### 4.2 数据库存储

- Task 表新增 outline 字段（text）
- 允许为空，不影响历史数据

### 4.3 任务创建行为

- 目录生成任务创建文档任务时写入 outline
- 其他任务类型不强制要求提供 outline

### 4.4 同步行为

- 任务同步导入/导出时包含 outline

## 五、验收标准

1. 目录生成输出包含 outline，并可被解析
2. Task 表新增 outline 字段且可持久化
3. 同步导入/导出任务数据不丢失 outline
4. 现有任务功能不受影响
