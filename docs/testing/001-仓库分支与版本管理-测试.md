# 001-仓库分支与版本管理-测试

# 0. 文件修改记录表

| 修改人 | 修改时间 | 修改内容 |
| ------ | -------- | -------- |
| AI | 2026-02-06 | 新增仓库克隆元数据记录测试方案 |
| AI | 2026-02-06 | 补充首页仓库列表展示校验 |

## 1. 测试范围

* 仓库目录大小计算
* 克隆分支与 commit 信息获取
* 克隆成功后 repository 表字段更新

## 2. 单元测试

### 2.1 仓库大小计算

- 构造临时目录写入固定大小文件
- 断言 size_mb 计算结果在合理误差范围内

### 2.2 分支与 commit 获取

- 初始化本地 git 仓库并提交一次
- 断言返回的分支名与 commit ID 非空

### 2.3 首页展示校验

- 首页仓库列表中显示分支与大小信息

## 3. 执行命令

```bash
go test ./...
```
