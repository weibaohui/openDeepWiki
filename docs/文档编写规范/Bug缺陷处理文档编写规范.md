# AI 可执行 Bug 描述与理解规范（Bug Fact Specification · L1）

> 本规范定义：**什么样的 Bug 描述，才允许交给 AI 进行分析或修复**
>
> 本文档只描述 Bug 的**事实**，不包含：
> - 根因推测
> - 修复方案
> - 技术决策
>
> 目标是让任何 AI 或新加入的工程师：
> - 只阅读本文档
> - 不依赖上下文
> - 不阅读代码
> 也能准确理解：**这个 Bug 是否成立、何时成立、边界在哪里**

---

## 0. 文件修改记录表

| 修改人 | 修改时间 | 修改内容 |
| ------ | -------- | -------- |
|   AI   | 2026-02-11 | 初始版本 |


---

## 1. Bug 基本信息（Identity）

用于唯一标识与追溯，不涉及技术判断。

- Bug ID：
- 所属系统 / 服务：
- 首次发现时间：
- 发现来源（用户 / 测试 / 监控 / 代码审查）：
- 当前状态：
  - 未确认
  - 已确认存在
  - 已进入分析
  - 已关闭

---

## 2. Bug 是否被确认存在（Existence）

**必须明确 Bug 是否真实存在，不允许模糊描述。**

- [ ] Bug 已被稳定复现  
- [ ] Bug 存在但不可稳定复现  
- [ ] Bug 是否存在尚不确定（禁止进入 AI 分析阶段）

### 2.1 复现环境（如果已复现）

- 环境类型（生产 / 预发 / 测试 / 本地）：
- 系统版本 / Commit ID：
- 相关配置项（仅列与 Bug 相关的）：

---

## 3. 触发条件（Trigger Conditions）

描述 **Bug 发生所需的最小条件集合**。

必须回答：

- 在什么前提下？
- 接收到什么输入？
- 是否涉及时序 / 并发 / 状态？

### 3.1 前置条件

- 系统状态：
- 数据状态：

### 3.2 输入条件

- 请求类型 / 参数：
- 数据范围或特征：

### 3.3 时序 / 并发条件（如适用）

- 是否必须并发？
- 是否依赖调用顺序？

> 规则：  
> **如果移除其中任一条件，Bug 不一定会发生**

---

## 4. 实际行为（Observed Behavior）

**仅描述事实，不解释原因。**

- 实际发生了什么行为：
- 返回结果 / 错误码 / 异常信息：
- 日志或外部可观测现象：
- 发生频率：
  - 必现
  - 高概率
  - 偶现
  - 随机

禁止：
- ❌ 推测原因
- ❌ 使用“可能是”“看起来像”

---

## 5. 期望行为（Expected Behavior）

描述 **在完全相同条件下，系统应该做什么**。

- 系统应当返回：
- 系统应当执行：
- 明确允许的正常结果范围（如存在多个正确结果）：

要求：
- 行为必须可判断“对 / 错”
- 不允许使用“合理”“正常”“符合预期”而不定义

---

## 6. 行为偏差定义（Deviation）

用一句话完成以下模板：

> **在【触发条件】下，系统实际执行了【Observed Behavior】，但期望执行的是【Expected Behavior】**

该句是 Bug 是否成立的**核心判据**。

---

## 7. 影响范围（Impact）

用于评估 Bug 严重性，不用于决定修复方案。

- 受影响模块 / 功能：
- 受影响用户或场景：
- 是否存在以下风险（可多选）：
  - 数据错误
  - 数据丢失
  - 安全风险
  - 服务不可用
- 影响范围是否已知完全：
  - 是
  - 否（必须在第 10 节说明）

---

## 8. 已知边界与非问题（Non-Issues）

**明确说明哪些情况不是 Bug，防止过度修复。**

- 在以下条件下，当前行为是正确的：
- 以下相似现象不属于本 Bug：
- 不需要在本 Bug 中解决的问题：

---

## 9. 事实证据（Facts & Evidence）

仅允许**客观、可验证材料**。

- 相关日志片段：
- 监控指标：
- Trace / Dump / 截图：
- 复现脚本（如有）：

禁止：
- ❌ 原因分析
- ❌ 修复建议
- ❌ 主观判断

---

## 10. 不确定点与待澄清事项（Uncertainties）

明确哪些信息**当前未知**，AI 不允许自行假设。

- 尚不清楚是否相关的变量：
- 需要人工确认的业务规则：
- 是否需要补充信息才能继续分析：

> 若本节存在关键未决项，Bug **不得进入 AI 修复阶段**。

---

## 11. AI 阅读与处理约束（强制）

AI 在处理本 Bug 描述时，必须遵守：

1. 仅基于本文档中的事实
2. 不补充隐含业务规则
3. 不将 Bug 解释为需求变更
4. 若 Bug 是否成立存在歧义，必须中止并请求澄清
5. 本文档 **不是修复指令**

---

## 12. 进入下一阶段的判定（Gate）

- [ ] Bug 描述完整，事实清晰，可进入分析阶段  
- [ ] Bug 描述不完整，禁止进入 AI 分析 / 修复流程  

